<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="board">
	<select id="selectAllList" resultType="BoardListDto">
		SELECT BOARD_ID, TITLE, BOARD_WRITER, WRITE_TIME, READ_COUNT FROM BOARD
	</select>

	<select id="selectTotalPageCount" resultType="_int">
		SELECT COUNT(*) c FROM BOARD
	</select>
	<select id="selectPage" resultType="BoardListDto"
		parameterType="map">
		SELECT T2.* FROM
		(SELECT T1.*, ROWNUM RN FROM
		(SELECT BOARD_ID, TITLE, to_char(WRITE_TIME, 'yyyy-mm-dd hh:mi') WRITE_TIME,
		BOARD_WRITER, READ_COUNT FROM BOARD ORDER BY BOARD_ID DESC) T1 ) T2
		WHERE RN BETWEEN #{startRounum} AND #{endRounum}
	</select>

	<select id="selectOne" resultType="BoardContentDto"
		parameterType="_int">
		SELECT TITLE, BOARD_WRITER, to_char(WRITE_TIME, 'yyyy-mm-dd hh:mi') WRITE_TIME, BOARD_LIKE, CONTENT FROM BOARD WHERE BOARD_ID = #{boardId}
	</select>

	<insert id="insert" parameterType="BoardInsertDto">
		INSERT INTO BOARD(BOARD_ID, BOARD_WRITER, TITLE, CONTENT, WRITE_TIME,
		READ_COUNT, BOARD_LIKE)
		VALUES(SEQ_BOARD_ID.nextval, #{boardWriter},
		#{title}, #{content}, default, default, default)
	</insert>

	<update id="update" parameterType="BoardDto">
		UPDATE BOARD SET TITLE = #{title}, CONTENT = #{content} WHERE BOARD_ID =
		#{boardId}
	</update>

	<delete id="delete" parameterType="_int">
		DELETE FROM BOARD WHERE BOARD_ID = #{boardId}
	</delete>
</mapper>
